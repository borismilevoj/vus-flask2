{% extends "base.html" %}
{% block title %}VUS – Veliki ugankarski slovar{% endblock %}

{% if obvestilo %}
<div style="background: #ffd966; color: #800000; padding: 10px; margin-bottom: 15px; border-radius: 8px; font-weight: bold;">
  ⚠️ {{ obvestilo }}
</div>
{% endif %}

{% block content %}
<style>
  .hero-image { background-color: rgba(0,0,0,0.4); background-blend-mode: multiply; }
  .btn-anim { transition: transform 0.3s ease, box-shadow 0.3s ease; }
  .btn-anim:hover { transform: scale(1.05); box-shadow: 0 0 10px rgba(0,0,0,0.3); }
</style>

<div class="container-fluid p-0">
  <div class="hero-image"
       style="background-image: url('{{ url_for('static', filename='slika.png') }}');
              background-size: 100% 100%;
              background-position: center;
              background-repeat: no-repeat;
              height: 100%;
              padding: 100px 20px;
              text-align: center;">
    <h1 class="display-5 fw-bold text-white">VUS – Veliki ugankarski slovar</h1>
    <p class="lead text-white">Slovar za križanke in uganke. Poišči gesla po vzorcu ali opisu.</p>

    <div class="d-flex flex-wrap justify-content-center mt-4 gap-3">
      <a class="btn btn-primary fw-bold btn-anim" href="{{ url_for('isci_vzorec') }}">IŠČI PO VZORCU</a>
      <!-- <a class="btn btn-primary fw-bold btn-anim" href="{{ url_for('isci_opis') }}">IŠČI PO OPISU</a> -->
      <a class="btn btn-success fw-bold btn-anim" href="{{ url_for('prikazi_krizanko', datum=None) }}">KRIŽANKA</a>
      <a class="btn btn-success fw-bold btn-anim" href="{{ url_for('sudoku_meni') }}">SUDOKU</a>
      <a class="btn btn-info fw-bold btn-anim" href="{{ url_for('prispevaj_geslo') }}">PRISPEVAJ GESLO</a>
    </div>

    <div class="stevec-home mt-4 fs-4 fw-bold text-warning">
  Gesel v bazi: <span id="stevecHome">—</span>
</div>

  </div>
</div>
{% block scripts %}
<script>
(() => {
  const out = document.getElementById('stevecHome');
  function set(v){ out.textContent = String(v).trim() || '—'; }

  async function loadCounter() {
    try {
      // 1) JSON endpoint
      const r = await fetch('/stevec_gesel', {
        headers: { 'Accept': 'application/json' },
        cache: 'no-store',
      });
      if (r.ok) {
        try {
          const data = await r.json();
          if (data && typeof data.stevilo_gesel !== 'undefined') {
            set(data.stevilo_gesel);
            return;
          }
        } catch (_) { /* pade na fallback */ }
      }

      // 2) Fallback: plain text endpoint
      const r2 = await fetch('/stevec_gesel.txt', { cache: 'no-store' });
      if (r2.ok) {
        const txt = await r2.text();
        set(txt);
        return;
      }

      set('napaka');
    } catch (e) {
      console.error('Stevec fetch error:', e);
      set('napaka');
    }
  }

  document.addEventListener('DOMContentLoaded', loadCounter);
})();
</script>
{% endblock %}

{% endblock %}

{# Ni skript bloka potreben; vse je narisano na strežniku. #}
